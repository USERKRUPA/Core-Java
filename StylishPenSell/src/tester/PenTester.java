package tester;

import java.time.LocalDate;
import java.time.Period;
import java.util.*;

import static utils.PenComparator.*;
import com.app.core.Pen;

public class PenTester {

	public static void main(String[] args) {
		try (Scanner sc = new Scanner(System.in)) {
			boolean flag = true;
			List<Pen> penList = populateList();
			while (flag) {
				try {
					System.out.println(
							"\n1. Add new Pen \n2. Update stock of a Pen \n3. Discount of 20% for pens not sold in last 3 months "
									+ "\n4. Remove never sold pens once listed in 9 months \n0. Exit");
					System.out.println("Enter your choice...");
					switch (sc.nextInt()) {
					case 1:
						System.out.println(
								"Enter brand name, Color , inkColor, material, stock, updateDate, price, discount");
						Pen pen = validateInputs(sc.next(), sc.next(), sc.next(), sc.next(), sc.nextInt(), sc.next(),
								sc.nextDouble(), sc.nextInt(), penList);
						penList.add(pen);
						print(penList);
						break;
					case 2:
						System.out.println("Enter Brand Name and stock(no of pen): ");
						updateStock(sc.next(), sc.nextInt(), penList);
						print(penList);
						break;
					case 3:
						for (Pen p : penList) {
							if (Period.between(p.getUpdateDate(), LocalDate.now()).toTotalMonths() > 3)
								p.setDiscount(20);
						}
						print(penList);
						break;
					case 4:
						removeNotSoldPens(penList);
						print(penList);
						break;
					case 0:
						flag = false;
						break;
					}
				} catch (Exception e) {
					e.printStackTrace();
					sc.nextLine();
				}
			}
		} // sc.close() scanner is autoclosable
	}
}
